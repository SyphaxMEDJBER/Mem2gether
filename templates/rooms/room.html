{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- HEADER ROOM -->
<div class="room-header">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
        <div class="text-start">
            <strong>Room {{ room.room_id }}</strong>
            <p class="mb-0 text-muted">
                Cr√©√©e par <span class="text-warning">{{ room.creator.username }}</span> ‚Ä¢ Mode :
                <span class="text-warning">
                    {% if room.mode == "youtube" %}YouTube{% else %}Photos{% endif %}
                </span>
            </p>
        </div>

        <div class="d-flex align-items-center gap-2">
            <span class="room-code">Code : {{ room.room_id }}</span>
        </div>
    </div>
</div>

<!-- WRAPPER PRINCIPAL -->
<div class="room-wrapper">

    <!-- SIDEBAR (UTILISATEURS / INFOS ROOM) -->
    <aside class="room-sidebar">
        <h5 class="mb-3">Participants</h5>

        <!-- Pour l‚Äôinstant : affichage simple -->
        <div class="participant-item d-flex justify-content-between align-items-center">
            <span class="fw-semibold">
                {{ request.user.username }}
            </span>
            <span class="badge bg-success">Moi</span>
        </div>

        <p class="mt-3 text-muted" style="font-size: 0.85rem;">
            L‚Äôaffichage temps r√©el des utilisateurs sera ajout√© plus tard
            (WebSockets / s√©ance suivante).
        </p>

        <hr class="my-4">

        <h5 class="mb-2">Infos room</h5>
        <ul class="list-unstyled text-muted" style="font-size: 0.9rem;">
            <li>‚Ä¢ ID : {{ room.room_id }}</li>
            <li>‚Ä¢ Cr√©ateur : {{ room.creator.username }}</li>
            <li>‚Ä¢ Mode actuel :
                {% if room.mode == "youtube" %}YouTube{% else %}Photos{% endif %}
            </li>
            <li>‚Ä¢ Cr√©√©e le : {{ room.created_at|date:"d/m/Y H:i" }}</li>
        </ul>

        <div class="leave-room-fixed mt-4">
            <a href="/" class="btn btn-outline-light w-100">
                Quitter la room
            </a>
        </div>
    </aside>

    <!-- PANEL PRINCIPAL -->
    <section class="room-main">

        <!-- BOUTONS MODE (pour plus tard, d√©coratifs pour l‚Äôinstant) -->
        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
            <div class="d-flex gap-2">
                <button class="mode-btn active" type="button" disabled>
                    Mode Photos
                </button>
                <button class="mode-btn" type="button" disabled>
                    Mode YouTube
                </button>
            </div>

            <span class="text-muted" style="font-size: 0.85rem;">
                Le changement de mode et la synchro vid√©o seront impl√©ment√©s dans une √©tape ult√©rieure.
            </span>
        </div>

        <!-- ZONE PRINCIPALE (IMAGE / VIDEO) -->
        <div class="sync-image-wrapper mb-3">
            <div class="text-center px-3">
                <p class="mb-2 text-muted">
                    Ici s‚Äôafficheront les images ou la vid√©o YouTube synchronis√©e.
                </p>
                <p class="mb-0" style="font-size: 0.9rem;">
                    Pour l‚Äôinstant, cette zone est uniquement visuelle (MVP s√©ance 1‚Äì2).
                </p>
            </div>
        </div>

        <!-- BAS DE PAGE : FILE / REACTIONS / CHAT (statique pour l‚Äôinstant) -->
        <div class="row g-3">

            <!-- File d‚Äôattente (placeholder) -->
            <div class="col-md-4">
                <h5 class="mb-2">File d‚Äôattente</h5>
                <div class="queue-item">
                    <div class="flex-grow-1">
                        <p class="mb-1 fw-semibold">Aucun m√©dia pour le moment</p>
                        <p class="mb-0 text-muted" style="font-size: 0.85rem;">
                            L‚Äôajout d‚Äôimages / vid√©os sera g√©r√© plus tard.
                        </p>
                    </div>
                </div>
            </div>

            <!-- R√©actions (placeholder) -->
            <div class="col-md-4">
                <h5 class="mb-2">R√©actions</h5>
                <div class="d-flex gap-2 mb-2">
                    <button class="reaction-btn" type="button" disabled>üëç</button>
                    <button class="reaction-btn" type="button" disabled>üòÇ</button>
                    <button class="reaction-btn" type="button" disabled>üòÆ</button>
                    <button class="reaction-btn" type="button" disabled>üíî</button>
                </div>
                <p class="text-muted" style="font-size: 0.85rem;">
                    Les r√©actions temps r√©el seront activ√©es avec les WebSockets.
                </p>
            </div>

            <!-- Chat (interface statique pour s√©ance 1‚Äì2) -->
            <div class="col-md-4">
                <h5 class="mb-2">Chat (bient√¥t en temps r√©el)</h5>

                <div class="chat-container p-2 rounded-3 mb-2" style="height: 180px; overflow-y:auto;">
                    <p class="text-muted" style="font-size: 0.9rem;">
                        Le chat en direct sera disponible √† la prochaine √©tape.
                    </p>
                </div>

                <div class="d-flex gap-2">
                    <input type="text"
                           class="form-control"
                           placeholder="Message..."
                           disabled>
                    <button class="btn btn-secondary" type="button" disabled>
                        Envoyer
                    </button>
                </div>
            </div>

        </div>
    </section>

</div>

{% endblock %}
